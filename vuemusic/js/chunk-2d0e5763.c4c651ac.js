(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5763"],{"951b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("Head-other",{attrs:{left:!0,title:"登录&&注册"}}),a("van-tabs",{attrs:{color:"#0f0","title-active-color":"#0f0"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("Login"),a("Register"),a("Phone")],1)],1)},n=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-tab",{attrs:{title:"登录"}},[a("van-form",{on:{submit:e.loginSubmit}},[a("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号码"}]},model:{value:e.login.mobile,callback:function(t){e.$set(e.login,"mobile",t)},expression:"login.mobile"}}),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.login.password,callback:function(t){e.$set(e.login,"password",t)},expression:"login.password"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 登录 ")])],1)],1)],1)},i=[],o=a("5530"),l={data:function(){return{login:{mobile:localStorage.mobile}}},methods:{loginSubmit:function(){var e=this;this.$axios.post("/vue/login",this.login).then((function(t){1==t.data.type&&(localStorage.token=t.data.token,sessionStorage.user=JSON.stringify(Object(o["a"])(Object(o["a"])({},t.data.data),{},{token:t.data.token})),e.$router.push({name:"recommend"}))}))}}},c=l,u=a("2877"),d=Object(u["a"])(c,r,i,!1,null,"0726eecc",null),m=d.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-tab",{attrs:{title:"注册"}},[a("van-form",{on:{submit:e.registerSubmit}},[a("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"手机号",rules:[{pattern:e.mobilPattern,message:"手机号码填写不正确"}]},model:{value:e.register.mobile,callback:function(t){e.$set(e.register,"mobile",t)},expression:"register.mobile"}}),a("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.register.username,callback:function(t){e.$set(e.register,"username",t)},expression:"register.username"}}),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{pattern:e.passwordPattern,message:"请填写正确密码,8位以上任意字符"}]},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password",t)},expression:"register.password"}}),a("van-field",{attrs:{type:"password",name:"dbpwd",label:"确认密码",placeholder:"确认密码",rules:[{required:!0,message:"请填写确认密码"},{validator:e.dbpwd,message:"请确认密码"}]},model:{value:e.register.dbpwd,callback:function(t){e.$set(e.register,"dbpwd",t)},expression:"register.dbpwd"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"primary","native-type":"submit"}},[e._v(" 马上注册 ")])],1)],1)],1)},b=[],v={data:function(){return{register:{},mobilPattern:/^1[3456789]\d{9}$/,passwordPattern:/.{8,}/}},methods:{registerSubmit:function(){var e=this;this.$axios.post("/vue/register",this.register).then((function(t){1===t.data.type&&e.$router.push({name:"main"})}))},dbpwd:function(){return this.register.password===this.register.dbpwd}}},g=v,f=Object(u["a"])(g,p,b,!1,null,"59b6e16c",null),h=f.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-tab",{attrs:{title:"验证码登录"}},[a("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"请输入手机号"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),a("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{attrs:{size:"small",type:"primary"},on:{click:e.sendSms}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}}),a("van-button",{attrs:{round:"",block:"",type:"warning"},on:{click:e.checkSms}},[e._v(" 验证登录 ")])],1)},k=[],x={data:function(){return{sms:"",mobile:""}},methods:{sendSms:function(){this.$axios.get("/yun/captcha/sent",{params:{phone:this.mobile}}).then((function(e){console.log(e)}))},checkSms:function(e){var t=this;this.$axios.get("/yun/captcha/verify",{params:{phone:this.mobile,captcha:this.sms}}).then((function(e){200==e.data.code&&t.$router.push({name:"main"})}))}}},y=x,$=Object(u["a"])(y,w,k,!1,null,"473de6ea",null),S=$.exports,_={data:function(){return{active:0}},components:{Login:m,Register:h,Phone:S}},O=_,j=Object(u["a"])(O,s,n,!1,null,"1da18b95",null);t["default"]=j.exports}}]);
//# sourceMappingURL=chunk-2d0e5763.c4c651ac.js.map